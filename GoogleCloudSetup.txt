Steps 
1. gcloud projects create retail-pipeline-421402
2. gcloud config set project retail-pipeline-421402
3. gcloud services enable compute.googleapis.com dataflow.googleapis.com pubsub.googleapis.com bigquery.googleapis.com cloudscheduler.googleapis.com
4. gcloud projects add-iam-policy-binding retail-pipeline-421402 --member="user:ritesh@beamlytics.com" --role=roles/iam.serviceAccountUser
5. gcloud iam service-accounts create retailpipeline \
    --description="Retail app data pipeline worker service account" \
    --display-name="Retail app data pipeline access"
6 

gcloud projects add-iam-policy-binding retail-pipeline-421402 --member="serviceAccount:retailpipeline@retail-pipeline-421402.iam.gserviceaccount.com" --role=roles/dataflow.admin

gcloud projects add-iam-policy-binding retail-pipeline-421402 --member="serviceAccount:retailpipeline@retail-pipeline-421402.iam.gserviceaccount.com" --role=roles/dataflow.worker

gcloud projects add-iam-policy-binding retail-pipeline-421402 --member="serviceAccount:retailpipeline@retail-pipeline-421402.iam.gserviceaccount.com" --role=roles/pubsub.editor

gcloud projects add-iam-policy-binding retail-pipeline-421402 --member="serviceAccount:retailpipeline@retail-pipeline-421402.iam.gserviceaccount.com" --role=roles/bigquery.dataEditor

7. gcloud iam service-accounts add-iam-policy-binding retailpipeline@retail-pipeline-421402.iam.gserviceaccount.com --member="user:ritesh@beamlytics.com" --role=roles/iam.serviceAccountTokenCreator

8. gcloud storage buckets create gs://retail-pipeline-421402-bucket1 --location=us-east1

9. 
gcloud pubsub topics create Clickstream-inbound
gcloud pubsub topics create Transactions-inbound
gcloud pubsub topics create Inventory-inbound
gcloud pubsub topics create Inventory-outbound

10.

gcloud pubsub subscriptions create --topic Clickstream-inbound Clickstream-inbound-sub
gcloud pubsub subscriptions create --topic Transactions-inbound Transactions-inbound-sub
gcloud pubsub subscriptions create --topic Inventory-inbound Inventory-inbound-sub

bq --location=US mk \
retail-pipeline-421402:Retail_Store

bq --location=US mk \
retail-pipeline-421402:Retail_Store_Aggregations

bq query --use_legacy_sql=false \
  'CREATE TABLE
    Retail_Store.Store_Locations
    (
      id INT64,
      city STRING,
      state STRING,
      zip INT64
    );
  INSERT INTO Retail_Store.Store_Locationss
  VALUES (1, "a_city", "a_state",00000);'

java -jar target/target/ecommerce-streamlytics-clickstream-bundled-1.0-SNAPSHOT.jar \
--project=retail-pipeline-beamlytics \
--tempLocation=gs://retail-pipeline-beamlytics-bucket1/temp/ \
--runner=DataflowRunner \
--region=us-east1 \
--clickStreamPubSubSubscription=projects/retail-pipeline-beamlytics/subscriptions/Clickstream-inbound-sub \
--transactionsPubSubSubscription=projects/retail-pipeline-beamlytics/subscriptions/Transactions-inbound-sub \
--inventoryPubSubSubscriptions=projects/retail-pipeline-beamlytics/subscriptions/Inventory-inbound-sub \
--aggregateStockPubSubOutputTopic=projects/retail-pipeline-beamlytics/topics/Inventory-outbound \
--dataWarehouseOutputProject=retail-pipeline-beamlytics
